<?php

//query listing
//contains all queries used in gtd-php as of 06/16/06

$sql = array(
//UpdateContext.php
        "reassigncontext"   =>  "UPDATE `itemattributes` SET `contextId`='{$values['newContextId']}' WHERE `contextId`='{$values['contextId']}`",
        "deletecontext"      =>  "DELETE FROM `context` WHERE `contextId`='{$values['contextId']}'",
        "updatecontext"     =>  "UPDATE `context` SET `name` ='{$values['name']}', `description`='{$values['description']}' WHERE `contextId` ='{$values['contextId']}'",

//updateTimeContext.php
        "reassigntimecontext"=> "UPDATE `itemattributes` SET `timeframeId`='{$values['ntcId']}' WHERE `timeframeId`='{$values['tcId']}'";
        "deletetimecontext" => "DELETE FROM `timeitems` WHERE `timeframeId`='{$values['tcId']}'";
        "updatetimecontext" => "UPDATE `timeitems` SET `timeframe` ='{$values['name']}', `description`='{$values['description']}' WHERE `timeframeId` ='{$values['tcId']}'";


//weekly.php
//select active projects
        $query=>"SELECT `projects.projectId`, `projects.name`, `projects.description`, `projectattributes.categoryId`, `categories.category`,
                `projectattributes.deadline`, `projectattributes.repeat`, `projectattributes.suppress`, `projectattributes.suppressUntil`
                FROM `projects`, `projectattributes`, `projectstatus`, `categories`
                WHERE `projectattributes.projectId`=`projects.projectId` AND `projectattributes.categoryId`=`categories.categoryId`
                AND `projectstatus.projectId`=`projects.projectId` AND `projectattributes.isSomeday` = 'n'
                AND (`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted` = '0000-00-00')
                AND (((CURDATE()>=DATE_ADD(`projectattributes.deadline`, INTERVAL -(`projectattributes.suppressUntil`) DAY))
                OR `projectattributes.suppress`='n')) ORDER BY `categories.category`, `projectattributes.deadline`, `projects.name` ASC";


//updateProject.php
        $query=> "DELETE FROM `projects` WHERE `projectId`='{$values['`projectId`']}'";
        $query=> "DELETE FROM `projectattributes` WHERE `projectId`='{$values['`projectId`']}'";
        $query=> "DELETE FROM `projectstatus` WHERE `projectId`='{$values['`projectId`']}'";
        $query=> "DELETE `itemattributes`
                FROM `itemattributes`, `items`, `itemstatus`
                WHERE `items.itemId`=`itemattributes.itemId` AND `itemstatus.itemId`=`itemattributes.itemId`
                AND `itemattributes.projectId`='{$values['`projectId`']}'";
    $query => "UPDATE `projects`
            SET `description` = '{$values['description']}', `name` = '{$values['name']}', `desiredOutcome` = '{$values['desiredOutcome']}'
            WHERE `projectId` ='{$values['`projectId`']}'";
        $query => "UPDATE `projectattributes`
                SET `categoryId` = '{$values['categoryId']}', `isSomeday` = '{$values['isSomeday']}', `deadline` ='{$values['deadline']}', `repeat` = '{$values['repeat']}', `suppress`='{$values['suppress']}', `suppressUntil`='{$values['suppressUntil']}'
                WHERE `projectId` ='{$values['`projectId`']}'";
        $query => "UPDATE `projectstatus`
                SET `dateCompleted`='{$values['dateCompleted']}'
                WHERE `projectId` ='{$values['`projectId`']}'";

//updateNote.php
        $query=> "DELETE FROM `tickler` WHERE `ticklerId`='{$values['noteId']}'";
        $query => "UPDATE `tickler` SET `date` = '{$values['date']}', `note` = '{$values['note']}', `title` = '{$values['title']}' WHERE `ticklerId` = '{$values['noteId']}'";

//updateListItem.php
if($delete=="y") {
        $query=> "DELETE FROM `listItems` WHERE `listItemId`='{$values['listItemId']}'";
        $query => "UPDATE `listItems`
        SET `notes` = '{$values['newnotes']}', `item` = '{$values['newitem']}', `listId` = '{$values['listId']}', `dateCompleted`='{$values['newdateCompleted']}'
        WHERE `listItemId` ='{$values['listItemId']}'";

//updateList.php
    $query=> "DELETE FROM `list` WHERE `listId`='{$values['listId']}'";
        $query=> "DELETE FROM `listItems` WHERE `listId`='{$values['listId']}'";
        $query => "UPDATE `list`
        SET `title` = '{$values['newlistTitle']}', `description` = '{$values['newdescription']}', `categoryId` = '{$values['newcategoryId']}'
        WHERE `listId` ='{$values['listId']}'";

//updateItem.php
        $query=> "DELETE FROM `items` WHERE `itemId`='{$values['itemId']}'";
    $query=> "DELETE FROM `itemattributes` WHERE `itemId`='{$values['itemId']}'";
        $query=> "DELETE FROM `itemstatus` WHERE `itemId`='{$values['itemId']}'";
                $query=> "DELETE FROM `nextactions` WHERE `nextAction`='{$values['itemId']}'";
        $query => "UPDATE items
            SET description = '{$values['description']}', title = '{$values['title']}'
            WHERE itemId = '{$values['itemId']}'";
        $query => "UPDATE `itemattributes`
                SET type = '{$values['type']}', `projectId` = '{$values['`projectId`']}', contextId = '{$values['contextId']}', timeframeId = '{$values['timeframeId']}',
                deadline ='{$values['deadline']}', `repeat` = '{$values['repeat']}', suppress='{$values['suppress']}', suppressUntil='{$values['suppressUntil']}'
                WHERE itemId = '{$values['itemId']}'";
        $query => "UPDATE itemstatus
                SET dateCompleted = '{$values['dateCompleted']}'
                WHERE itemId = '{$values['itemId']}'";
                $query => "INSERT INTO nextactions (`projectId`,nextaction) VALUES ('{$values['`projectId`']}','{$values['itemId']}')
                        ON DUPLICATE KEY UPDATE nextaction='{$values['itemId']}'";
                $query=> "DELETE FROM nextactions WHERE nextAction='{$values['itemId']}'";

//UpdateGoal.php
        $query => "UPDATE goals
                SET goal = '{$values['goal']}',
                description = '{$values['description']}',
                created = '{$values['created']}',
                deadline = '{$values['deadline']}',
                completed = ''{$values['completed']}'',
                type='{$values['type']}',
                `projectId` = '{$values['`projectId`']}'
                WHERE id = '{$values['gid']}'";



//UpdateChecklistItem.php
        $query=> "DELETE FROM checklistItems WHERE checklistItemId='{$values['checklistItemId']}'";
    $query => "SELECT title FROM checklist WHERE checklistId='{$values['checklistId']}'";
        $query => "UPDATE checklistItems
        SET notes = '{$values['newnotes']}', item = '{$values['newitem']}', checklistId = '{$values['checklistId']}', checked='{$values['newchecked']}'
        WHERE checklistItemId ='{$values['checklistItemId']}'";

//UpdateChecklist.php
        $query=> "DELETE FROM checklist WHERE checklistId='{$values['checklistId']}'";
        $query=> "DELETE FROM checklistItems WHERE checklistId='{$values['checklistId']}'";
        $query => "UPDATE checklist
        SET title = '{$values['newchecklistTitle']}', description = '{$values['newdescription']}', categoryId = '{$values['newcategoryId']}'
        WHERE checklistId ='{$values['checklistId']}'";

//updateCategory.php
        $reassignquery=> "UPDATE projectattributes SET categoryId='$newCategoryId' WHERE categoryId='{$values['categoryId']}'";
        $deletequery => "DELETE FROM categories WHERE categoryId='{$values['categoryId']}'";
        $query => "UPDATE categories SET category ='{$values['category']}', description='{$values['description']}' WHERE categoryId ='{$values['categoryId']}'";

//tickler.php
$query => "SELECT `projectId`, nextaction FROM nextactions";
$query => "SELECT ticklerId, title, note, date FROM tickler WHERE (date IS NULL OR date = '0000-00-00') OR (CURDATE()<= date)";
$query => "SELECT `itemattributes.projectId`, `projects.name` AS `pname`, `items.title`, `items.description`, `itemstatus.dateCreated`,
        `context.contextId`, `context.name` AS `cname`, `items.itemId`, `itemstatus.dateCompleted`, `itemattributes.deadline`,
        `itemattributes.repeat`, `itemattributes.suppress`, `itemattributes.suppressUntil`, `itemattributes.type`
        FROM `items`, `itemattributes`, `itemstatus`, `projects`, `projectstatus`, `context`
        WHERE `itemstatus.itemId` = `items.itemId` AND `itemattributes.itemId` = `items.itemId`
        AND `itemattributes.contextId` = `context.contextId` AND `itemattributes.projectId` = `projects.projectId`
        AND `projectstatus.projectId` = `itemattributes.projectId`
        AND (`itemstatus.dateCompleted` IS NULL OR `itemstatus.dateCompleted` = '0000-00-00')
        AND (`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted` = '0000-00-00') AND (`itemattributes.suppress`='y')
        ORDER BY `itemattributes.deadline`, `cname`, `pname`";
$query => "SELECT `projects.projectId`, `projects.name`, `projects.description`, `projectstatus.dateCreated`,
        `categories.categoryId`, `categories.category` AS `cname`, `projectattributes.deadline`,
        `projectattributes.repeat`, `projectattributes.suppress`, `projectattributes.suppressUntil`
        FROM `projects`, `projectattributes`, `projectstatus`, `categories`
        WHERE `projectstatus.projectId` = `projects.projectId` AND `projectattributes.projectId` = `projects.projectId`
        AND `categories.categoryId`=`projectattributes.categoryId`
        AND (`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted` = '0000-00-00') AND (`projectattributes.suppress`='y')
        ORDER BY `projectattributes.deadline`, `cname`, `projects.name`";


//summary.php
        $query => "SELECT `projects.projectId`, `projects.name`, `projects.description`, `projectattributes.categoryId`, `categories.category`
                FROM `projects`, `projectattributes, projectstatus`, `categories`
                WHERE `projectattributes.projectId`=`projects.projectId` AND `projectattributes.categoryId`=`categories.categoryId`
                AND `projectstatus.projectId`=`projects.projectId` AND
                (`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted` = '0000-00-00') AND `projectattributes.isSomeday`='n'
                ORDER BY `projects.name` ASC";
        $query => "SELECT `projects.projectId`, `projects.name`, `projects.description`, `projectattributes.categoryId`, `categories.category`
                FROM `projects`, `projectattributes`, `projectstatus`, `categories`
                WHERE `projectattributes.projectId`=`projects.projectId` AND `projectattributes.categoryId`=`categories.categoryId`
                AND `projectstatus.projectId`=`projects.projectId` AND
                (`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted` = '0000-00-00') AND `projectattributes.isSomeday`='y'
                ORDER BY `projects.name` ASC";
        $query => "Select * FROM `context`";


//reportContext.php
$query => "SELECT `projectId`, `name` FROM `projects`";
*$query => "SELECT contextId, name FROM context";
*$query => "SELECT timeframeId, timeframe, description FROM timeitems";
*$query => "SELECT `projectId`, `nextaction` FROM `nextactions`";
$query=>"SELECT `itemattributes`.contextId, `itemattributes.timeframeId`, COUNT(*) AS `count`
        FROM `itemattributes`, `itemstatus`, `projectattributes`, `projectstatus`, `nextactions`
        WHERE `itemstatus.itemId`=`itemattributes.itemId` AND `projectattributes.projectId`=`itemattributes.projectId`
    AND `nextactions.nextaction` = `itemstatus.itemId`
        AND `projectstatus.projectId`=`projectattributes.projectId` AND `itemattributes.type`='a' AND `projectattributes.isSomeday`='n'
        AND (`itemstatus.dateCompleted` IS NULL OR `itemstatus.dateCompleted`='0000-00-00')
        AND (`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted`='0000-00-00')
        AND ((CURDATE() >= DATE_ADD(`itemattributes.deadline`, INTERVAL -(`itemattributes.suppressUntil`) DAY))
                OR `projectattributes.suppress`='n'
                OR (CURDATE() >= DATE_ADD(`projectattributes.deadline`, INTERVAL -(`projectattributes.suppressUntil`) DAY)))
        GROUP BY `itemattributes.contextId`, `itemattributes.timeframeId`";
                $query = "SELECT `itemattributes.projectId`, `projects.name` AS `pname`, `items.title`, `items.description`, `itemstatus.dateCreated`,
                        `items.itemId`, `itemstatus.dateCompleted`, `itemattributes.deadline`,
                        `itemattributes.repeat`, `itemattributes.suppress`, `itemattributes.suppressUntil`
                        FROM `items`, `itemattributes`, `itemstatus`, `projects`, `projectattributes`, `projectstatus`, `nextactions`
                        WHERE `itemstatus.itemId` = `items.itemId` AND `itemattributes.itemId` = `items.itemId`
                        AND `itemattributes.projectId` = `projects.projectId`
                        AND `projectattributes.projectId`=`itemattributes.projectId` AND `projectstatus.projectId` = `itemattributes.projectId`
                        AND `nextactions.nextaction`=`items.itemId`
                        AND `itemattributes.type` = 'a' AND `itemattributes.timeframeId`='{$values['timeframeId']}' AND `projectattributes.isSomeday`='n'
                        AND `itemattributes.contextId`='{$values['contextId']}' AND (`itemstatus.dateCompleted` IS NULL OR `itemstatus.dateCompleted` = '0000-00-00')
                        AND (`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted` = '0000-00-00')
                        AND ((CURDATE() >= DATE_ADD(`itemattributes.deadline`, INTERVAL -(`itemattributes.suppressUntil`) DAY))
                                OR `projectattributes.suppress`='n'
                                OR (CURDATE() >= DATE_ADD(`projectattributes.deadline`, INTERVAL -(`projectattributes.suppressUntil`) DAY)))
                        ORDER BY `projects.name`";

//projectReport.php
$query => "SELECT `projects.name`, `projects.description`, `projects.desiredOutcome`, `projectstatus.dateCreated`,
        `projectstatus.dateCompleted`, projectstatus.lastModified, `projectattributes.deadline`, `projectattributes.repeat`,
        `projectattributes.suppress`, `projectattributes.suppressUntil`, projectattributes.isSomeday
        FROM projects,projectattributes, projectstatus
        WHERE projectstatus.`projectId` = `projects.projectId` AND projectattributes.`projectId` = `projects.projectId` AND
        `projects.projectId` = '{$values['pId']}'";
function doitemquery($projectId,$type,$completed='n') {
        if ('{$values['completed']}'=="y") $compq = "itemstatus.dateCompleted > 0";
        else $compq = "itemstatus.dateCompleted IS NULL OR itemstatus.dateCompleted = '0000-00-00'";

        $query => "SELECT `items.itemId`, `items.title`, `items.description`, `itemstatus.dateCreated`, `itemstatus.dateCompleted`,
                `context.contextId`, `context.name` AS `cname`, `itemattributes.deadline`, `itemattributes.repeat`,
                `itemattributes.suppress`, `itemattributes.suppressUntil`
                FROM `items`, `itemattributes`, `itemstatus`, `context`
                WHERE `itemstatus.itemId` = `items.itemId` AND `itemattributes.itemId` = `items.itemId` AND
                `itemattributes.contextId` = `context.contextId` AND `itemattributes.projectId` = '{$values['`projectId`']}'
                AND `itemattributes.type` = '{$values['type']}' AND (".$compq.") ORDER BY `items.title` ASC, `cname` ASC";
        $result = mysql_query($query) OR die ("Error in query");
        return $result;
        }
$query => "SELECT `projectId`, `nextaction` FROM `nextactions`";
$compq => "(`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted` = '0000-00-00')
                AND (((CURDATE()>=DATE_ADD(`projectattributes.deadline`, INTERVAL -(`projectattributes.suppressUntil`) DAY))
                    OR `projectattributes.suppress`='n'))";
$query=>"SELECT `projects.projectId`, `projects.name`, `projects.description`, `projectattributes.categoryId`, `categories.category`,
                `projectattributes.deadline`, `projectattributes.repeat`, `projectattributes.suppress`, `projectattributes.suppressUntil`
                FROM projects, projectattributes, projectstatus, categories
                WHERE projectattributes.`projectId`=`projects.projectId` AND `projectattributes.categoryId`=categories.categoryId
                AND projectstatus.`projectId`=`projects.projectId` AND projectattributes.isSomeday = '{$values['isSomeday']}' AND ".$compq."
                ORDER BY `categories.category`, `projects.name` ASC";

//project.php
        $query=> "SELECT `projects.projectId`, `projects.name`, `projects.description`, projects.desiredOutcome,
                `projectstatus.dateCreated`, `projectstatus.dateCompleted`, `projectattributes.categoryId`, `projectattributes.deadline`,
                `projectattributes.repeat`, `projectattributes.suppress`, `projectattributes.suppressUntil`, projectattributes.isSomeday
                FROM projects, projectattributes, projectstatus
                WHERE projectstatus.`projectId`=`projects.projectId` AND projectattributes.`projectId`=`projects.projectId` AND
                `projects.projectId` = '{$values['`projectId`']}'";
$query => "SELECT categories.categoryId, `categories.category` FROM categories ORDER BY `categories.category` ASC";

//processProjectUpdate.php
                $testquery => "SELECT `projectattributes.repeat` FROM projectattributes WHERE projectattributes.`projectId`='{$values['completedPr']}'";
                        $copyquery => "SELECT `projects.name`, `projects.description` FROM projects WHERE `projects.projectId`='{$values['completedPr']}'";
                        $addquery => "INSERT INTO `projects` (name,description) VALUES ('".$copyproject['name']."','".$copyproject['description']."')";
                        $copyquery => "SELECT projectattributes.`projectId`, `projectattributes.categoryId`,
                                        projectattributes.isSomeday, `projectattributes.deadline`,
                                        `projectattributes.repeat`, `projectattributes.suppress`, `projectattributes.suppressUntil`
                                        FROM projectattributes WHERE projectattributes.`projectId`='{$values['completedPr']}'";
                        $addquery => "INSERT INTO `projectattributes` (`projectId`,categoryId,isSomeday,deadline,`repeat`,suppress,suppressUntil) VALUES ('$newprojectId','".$copyattributes['categoryId']."','".$copyattributes['isSomeday']."','$nextduedate','".$copyattributes['repeat']."','".$copyattributes['suppress']."','".$copyattributes['suppressUntil']."')";
                        $addquery => "INSERT INTO `projectstatus` (`projectId`,dateCreated) VALUES ('$newprojectId','{$values['date']}')";
                $query= "UPDATE projectstatus SET dateCompleted='{$values['date']}' WHERE `projectId`='{$values['completedPr']}'";

//processProject.php
$addquery => "INSERT INTO projects (name,description,desiredOutcome) VALUES ('{$values['name']}','{$values['description']}','{$values['desiredOutcome']}')";
    $addquery => "INSERT INTO projectattributes (`projectId`,categoryId,isSomeday,deadline,`repeat`,suppress,suppressUntil) VALUES ('{$values['`projectId`']}','{$values['categoryId']}','{$values['isSomeday']}','{$values['deadline']}','{$values['repeat']}','{$values['suppress']}','{$values['suppressUntil']}')";
        $addquery => "INSERT INTO projectstatus (`projectId`,dateCreated) VALUES ('{$values['`projectId`']}',CURRENT_DATE)";

//processNote.php
*$addquery => "INSERT INTO `tickler` (date,title,note) VALUES ('{$values['date']}','{$values['title']}','{$values['note']}')";

//processListUpdate.php
                $query=> "UPDATE `listItems` SET `dateCompleted`='{$values['date']}' WHERE `listItemId`='{$values['completedLi']}'";
        $query => "SELECT `listId` FROM `listItems` WHERE `listItemId`='{$values['completedLi']}'";

//processListItem.php
        $query => "INSERT INTO listItems VALUES (NULL, '{$values['item']}', '{$values['notes']}', '{$values['listId']}', 'n')";

//processItemUpdate.php


//check code for $copyitem array
                $testquery => "SELECT `itemattributes`.repeat FROM `itemattributes` WHERE `itemattributes`.itemId=''{$values['completed']}'Na'";
                        $copyquery => "SELECT items.title, items.description FROM items WHERE `items.itemId`=''{$values['completed']}'Na'";
                        $addquery => "INSERT INTO `items` (title,description) VALUES ('".addslashes(stripslashes($copyitem['title']))."','".addslashes(stripslashes($copyitem['description']))."')";
                        $copyquery => "SELECT `itemattributes`.`projectId`, `itemattributes`.contextId, `itemattributes`.timeframeId,
                                        `itemattributes`.deadline, `itemattributes`.repeat, `itemattributes`.suppress, `itemattributes`.suppressUntil
                                        FROM `itemattributes` WHERE `itemattributes`.itemId=''{$values['completed']}'Na'";
                        $addquery => "INSERT INTO `itemattributes` (itemId,`projectId`,contextId,timeframeId,deadline,`repeat`,suppress,suppressUntil) VALUES ('$newitemId','".$copyattributes['`projectId`']."','".$copyattributes['contextId']."','".$copyattributes['timeframeId']."','$nextduedate','".$copyattributes['repeat']."','".$copyattributes['suppress']."','".$copyattributes['suppressUntil']."')";
                        $addquery => "INSERT INTO `itemstatus` (itemId,dateCreated) VALUES ('$newitemId','{$values['date']}')";
                        $copyquery => "SELECT `projectId`, nextaction FROM nextactions WHERE nextaction=''{$values['completed']}'Na'";
                                $query => "INSERT INTO nextactions (`projectId`,nextAction) VALUES ('".$copyattributes['`projectId`']."','{$values['newitemId']}')
                                        ON DUPLICATE KEY UPDATE nextaction='{$values['newitemId']}'";
                $query=> "UPDATE itemstatus SET dateCompleted='{$values['date']}' WHERE itemId='{$values['completedNa']}'";
                $query=> "DELETE FROM nextactions WHERE nextAction=''{$values['completedNa']}'";

//processItem.php
$addquery => "INSERT INTO `items` (title,description) VALUES ('{$values['title']}','{$values['description']}')";
$addquery => "INSERT INTO `itemattributes` (itemId,type,`projectId`,contextId,timeframeId,deadline,`repeat`,suppress,suppressUntil) VALUES ('{$values['itemId']}','{$values['type']}','{$values['`projectId`']}','{$values['contextId']}','{$values['timeframeId']}','{$values['deadline']}','{$values['repeat']}','{$values['suppress']}','{$values['suppressUntil']}')";
        $addquery => "INSERT INTO `itemstatus` (itemId,dateCreated) VALUES ('{$values['itemId']}',CURRENT_DATE)";
        $query => "INSERT INTO nextactions (`projectId`,nextaction) VALUES ('{$values['`projectId`']}','{$values['itemId']}')
                ON DUPLICATE KEY UPDATE nextaction='{$values['itemId']}'";

//processGoal.php
        $query => "INSERT INTO goals  VALUES (NULL, '{$values['goal']}',
        '{$values['description']}','{$values['date']}', '{$values['deadline']}',  NULL, '{$values['type']}', '{$values['`projectId`']}')";

//processChecklistUpdate.php
$query=> "UPDATE checklistItems SET checked='n' WHERE checklistId='{$values['checklistId']}'";
                $query=> "UPDATE checklistItems SET checked='y' WHERE checklistItemId='{$values['Cli']}'";
        $query => "SELECT checklistId FROM checklistItems WHERE checklistItemId='{$values['checklistItemId']}'";

//processChecklistItem.php
        $query => "INSERT INTO checklistItems  VALUES (NULL, '{$values['item']}', '{$values['notes']}', '{$values['checklistId']}', 'n')";

//note.php
        $query => "SELECT ticklerId, title, note, date FROM tickler WHERE ticklerId='{$values['noteId']}'";

//newTimeContext.php
        $query => "INSERT INTO timeitems  VALUES (NULL, '{$values['name']}', '{$values['description']}')";

//newListItem.php
        $query => "SELECT listId, title FROM list ORDER BY title";

//newList.php
                $query => "SELECT * FROM categories";
//SELECT categories.categoryId, categories.name FROM categories ORDER BY categories.name ASC

//newGoal.php
        $query => "SELECT * FROM projects ORDER BY name";

//newContext.php
        $query => "INSERT INTO context  VALUES (NULL, '{$values['name']}', '{$values['description']}')";

//newChecklistItem.php
        $query => "SELECT checklistId, title FROM checklist ORDER BY title";

//newChecklist.php
$query => "SELECT * FROM categories"
        $query => "INSERT INTO checklist VALUES (NULL, '{$values['title']}', '{$values['categoryId']}', '{$values['description']}')";

//newCategory.php
        $query => "INSERT INTO categories VALUES (NULL, '{$values['name']}', '{$values['description']}')";

//makegtd.sql
//keep seperate

//listReport.php
        $query => "SELECT listItems.listItemId, listItems.item, listItems.notes, listItems.listId
                FROM listItems
                LEFT JOIN list on listItems.listId = list.listId
                WHERE list.listId = '{$values['listId']}' AND (listItems.dateCompleted is not null AND listItems.dateCompleted='0000-00-00')";
        $query => "SELECT listItems.listItemId, listItems.item, listItems.notes, listItems.listId
                FROM listItems
                LEFT JOIN list on listItems.listId = list.listId
                WHERE list.listId = '{$values['listId']}' AND (listItems.dateCompleted!='0000-00-00' AND listItems.dateCompleted is not null)";

//listProjects.php
$query => "SELECT categories.categoryId, `categories.category`, categories.description FROM categories ORDER BY `categories.category` ASC";
if ('{$values['completed']}'=="y") $compq => "`projectstatus.dateCompleted` > 0";
else $compq => "(`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted` = '0000-00-00')
                AND (((CURDATE()>=DATE_ADD(`projectattributes.deadline`, INTERVAL -(`projectattributes.suppressUntil`) DAY))
                    OR `projectattributes.suppress`='n'))";
        $query=>"SELECT `projects.projectId`, `projects.name`, `projects.description`, `projectattributes.categoryId`, `categories.category`,
                `projectattributes.deadline`, `projectattributes.repeat`, `projectattributes.suppress`, `projectattributes.suppressUntil`
                FROM projects, projectattributes, projectstatus, categories
                WHERE projectattributes.`projectId`=`projects.projectId` AND `projectattributes.categoryId`=categories.categoryId
                AND projectstatus.`projectId`=`projects.projectId` AND projectattributes.isSomeday = '{$values['isSomeday']}' AND ".$compq."
                ORDER BY `categories.category`, `projects.name` ASC";
        $query=>"SELECT `projects.projectId`, `projects.name`, `projects.description`, `projectattributes.categoryId`, `categories.category`,
                `projectattributes.deadline`, `projectattributes.repeat`, `projectattributes.suppress`, `projectattributes.suppressUntil`
                FROM projects, projectattributes, projectstatus, categories
                WHERE projectattributes.`projectId`=`projects.projectId` AND `projectattributes.categoryId`=categories.categoryId
                AND projectstatus.`projectId`=`projects.projectId` AND (".$compq.") AND `projectattributes.categoryId`='{$values['categoryId']}'
                AND projectattributes.isSomeday='{$values['isSomeday']}'
                ORDER BY `categories.category`, `projects.name` ASC";

//listList.php
                $query => "SELECT * FROM categories";
            $query => "SELECT list.listId, list.title, list.description,
                list.categoryId, `categories.category`
                FROM list, categories
                WHERE list.categoryId=categories.categoryId
                ORDER BY `categories.category` ASC";
            $query => "SELECT list.listId, list.title, list.description,
                list.categoryId, `categories.category`
                FROM list, categories
                WHERE list.categoryId=categories.categoryId AND list.categoryId='{$values['categoryId']}'
                ORDER BY `categories.category` ASC";
//listItems.php
$query => "SELECT contextId, name, description  FROM context ORDER BY name ASC";
$query => "SELECT timeframeId, timeframe, description FROM timeitems";
$query => "SELECT `projectId`, nextaction FROM nextactions";
$query => "SELECT categories.categoryId, `categories.category`, categories.description FROM categories ORDER BY `categories.category` ASC";
if ($contextId != NULL) $contextquery => "AND `itemattributes`.contextId = '{$values['contextId']}'";
if ($categoryId != NULL) $catquery => " AND `projectattributes.categoryId` = '{$values['categoryId']}'";
if ($timeId !=NULL) $timequery => "AND `itemattributes`.timeframeId ='$timeId'";

                $query => "SELECT `itemattributes`.`projectId`, `projects.name` AS pname, items.title, items.description, itemstatus.dateCreated,
                        context.contextId, context.name AS cname, `items.itemId`, itemstatus.dateCompleted, `itemattributes`.deadline,
                        `itemattributes`.repeat, `itemattributes`.suppress, `itemattributes`.suppressUntil
                        FROM items, `itemattributes`, itemstatus, projects, projectattributes, projectstatus, context
                        WHERE itemstatus.itemId = `items.itemId` AND `itemattributes`.itemId = `items.itemId`
                        AND `itemattributes`.contextId = context.contextId AND `itemattributes`.`projectId` = `projects.projectId`
                        AND projectattributes.`projectId`=`itemattributes`.`projectId` AND projectstatus.`projectId` = `itemattributes`.`projectId`
                        AND `itemattributes`.type = '$typequery' " .$catquery.$contextquery.$timequery. " AND projectattributes.isSomeday='$ptypequery'
                        AND (itemstatus.dateCompleted IS NULL OR itemstatus.dateCompleted = '0000-00-00')
                        AND (`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted` = '0000-00-00')
                        AND ((CURDATE() >= DATE_ADD(`itemattributes`.deadline, INTERVAL -(`itemattributes`.suppressUntil) DAY))
                                OR `itemattributes`.suppress='n'
                                OR ((CURDATE() >= DATE_ADD(`projectattributes.deadline`, INTERVAL -(`projectattributes.suppressUntil`) DAY))))
                        ORDER BY `projects.name`, `itemattributes`.deadline, items.title";

//listGoals.php
        $query => "SELECT * FROM goals ORDER BY type ASC";
        $query => 'SELECT * FROM goals WHERE completed IS NOT NULL
        AND completed != "0000-00-00" ORDER BY created DESC, type DESC';

//listChecklist.php
            $query => "SELECT checklist.checklistId, checklist.title, checklist.description,
                checklist.categoryId, `categories.category`
                FROM checklist, categories
                WHERE checklist.categoryId=categories.categoryId
                ORDER BY `categories.category` ASC";
            $query => "SELECT checklist.checklistId, checklist.title, checklist.description,
                checklist.categoryId, `categories.category`
                FROM checklist, categories
                WHERE checklist.categoryId=categories.categoryId AND checklist.categoryId='{$values['categoryId']}'
                ORDER BY `categories.category` ASC";

//item.php
        $query=> "SELECT `items.itemId`, `itemattributes`.`projectId`, `itemattributes`.contextId, `itemattributes`.type, `itemattributes`.timeframeId, items.title,
                        items.description, itemstatus.dateCreated, `itemattributes`.deadline, itemstatus.dateCompleted, itemstatus.lastModified,
                        `itemattributes`.repeat, `itemattributes`.suppress, `itemattributes`.suppressUntil FROM items, `itemattributes`, itemstatus
                        WHERE itemstatus.itemId=`items.itemId` AND `itemattributes`.itemId=`items.itemId` AND `items.itemId` = '{$values['itemId']}'";
        $query => "SELECT `projectId`, nextaction FROM nextactions WHERE nextaction='{$values['itemId']}'";
        $query=>"SELECT `projects.projectId`, `projects.name`, `projects.description`
                FROM projects, projectattributes, projectstatus
                WHERE projectattributes.`projectId` = `projects.projectId`
                AND projectstatus.`projectId`=`projects.projectId`
                AND (`projectstatus.dateCompleted` IS NULL OR `projectstatus.dateCompleted` = '0000-00-00')
                AND projectattributes.isSomeday ='{$values['isSomeday']}' ORDER BY `projects.name`";
        $query => "SELECT contextId, name, description FROM context ORDER BY name ASC";
        $query => "SELECT timeframeId, timeframe, description FROM timeitems ORDER BY timeframe DESC";

//install.php
//keep seperate

//gtdfuncs.php
        $query => "SELECT nextaction  FROM nextactions";
        $query => "SELECT `itemattributes`.itemid FROM `itemattributes` WHERE type = 'a'";
        $result => mysql_query("SELECT itemstatus.itemId FROM itemstatus, `itemattributes`
                                WHERE `itemattributes`.itemId=itemstatus.itemId AND `itemattributes`.type='a' AND dateCompleted >0");
        $query=>"SELECT name FROM projects WHERE `projectId`='{$values['`projectId`']}'";
                $projectRes => mysql_query("SELECT * FROM projects");
                $query => "SELECT `projectId`, nextaction FROM nextactions WHERE `projectId`='{$values['`projectId`']}'";

//editTimeContext.php
        $query => "SELECT timeframeId, timeframe FROM timeitems ORDER BY timeframe ASC";
        $query => "SELECT timeframeId, timeframe, description FROM timeitems WHERE timeframeId = '{$values['tcId']}'";

//editListItem.php
        $query => "SELECT listItemId, item, notes, listId, dateCompleted FROM listItems WHERE listItemId = '{$values['$listItemId']}'";
        $query => "SELECT * FROM list ORDER BY title";

//editList.php
        $query => "SELECT title, description, categoryId FROM list WHERE listId = '{$values['listId']}'";
                $catquery => "SELECT * FROM categories";

//editGoal.php
        $query => "SELECT * FROM goals WHERE id = '{$values['$goalId']}'";
        $query => "SELECT * FROM projects ORDER BY name";

//editContext.php
        $query => "SELECT contextId, name FROM context ORDER BY name ASC";
        $query => "SELECT contextId, name, description FROM context WHERE contextId = '{$values['contextId']}'";

//editChecklistItem.php
        $query => "SELECT checklistItemId, item, notes, checklistId, checked FROM checklistItems WHERE checklistItemId = '{$values['$checklistItemId']}'";
        $query => "SELECT * FROM checklist ORDER BY title";

//editChecklist.php
        $query => "SELECT title, description, categoryId FROM checklist WHERE checklistId = '{$values['checklistId']}'";
                $catquery = "SELECT * FROM categories";

//editCategory.php
*      $query => "SELECT categoryId, category, description FROM categories ORDER BY category ASC";
*	$query => "SELECT categoryId, category, description FROM categories WHERE categoryId = '{$values['categoryId']}'";

//checklistReport.php
$query => "SELECT checklistItems.checklistitemId, checklistItems.item, checklistItems.notes, checklistItems.checklistId, checklistItems.checked
                FROM checklistItems
                LEFT JOIN checklist on checklistItems.checklistId = checklist.checklistId
                WHERE checklist.checklistId = '{$values['checklistId']}' ORDER BY checklistItems.checked DESC, checklistItems.item ASC";

*/

);

?>