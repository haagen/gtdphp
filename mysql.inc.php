<?php

//query listing for MySQL database
//API Documentation available in __________
//NB: All queries written to operate on single table for compatibility with other databases
//MySQL extensions to standard SQL have been avoided where known
//Queries may be rewritten in future as SQL evolves and as other database types are supported

//GENERAL RULES:
//"select" = query for something by its id; a single-row result
//"get" = query for something of a particular type; a multi-row result
//"new", "update", "delete" are self-explanatory
//"check"="complete" for checklistselectbox
//"complete" = set status to completed
//"remove" = remove by association Id (items associated with a project, etc)
//"Count" = # of a particular type in table
//"selectbox" = get results to create a selectbox- for assignment or filter

$sql = array(
        "categoryselectbox"         => "SELECT `" . $config['prefix'] . "categories`.`categoryId`, `" . $config['prefix'] . "categories`.`category`, `" . $config['prefix'] . "categories`.`description` FROM `" . $config['prefix'] . "categories` ORDER BY {$sort['categoryselectbox']}",
        "checkchecklistitem"        => "UPDATE `" . $config['prefix'] . "checklistItems` SET `" . $config['prefix'] . "checked` = 'y' WHERE `" . $config['prefix'] . "checklistItemId`='{$values['Cli']}'",
        "checklistselectbox"        => "SELECT `" . $config['prefix'] . "checklist`.`checklistId`, `" . $config['prefix'] . "checklist`.`title`, `" . $config['prefix'] . "checklist`.`description`, `" . $config['prefix'] . "checklist`.`categoryId`, `" . $config['prefix'] . "categories`.`category` FROM `" . $config['prefix'] . "checklist`, `" . $config['prefix'] . "categories` WHERE `" . $config['prefix'] . "checklist`.`categoryId`=`categories`.`categoryId` ORDER BY {$sort['checklistselectbox']}",
        "clearchecklist"            => "UPDATE `" . $config['prefix'] . "checklistItems` SET `" . $config['prefix'] . "checked` = 'n' WHERE `" . $config['prefix'] . "checklistId` = '{$values['checklistId']}'",
        "completeitem"              => "UPDATE `" . $config['prefix'] . "itemstatus` SET `" . $config['prefix'] . "dateCompleted`='{$values['date']}' WHERE `" . $config['prefix'] . "itemId`='{$values['completedNa']}'",
        "completelistitem"          => "UPDATE `" . $config['prefix'] . "listItems` SET `" . $config['prefix'] . "dateCompleted`='{$values['date']}' WHERE `" . $config['prefix'] . "listItemId`='{$values['completedLi']}'",
        "copynextaction"            => "INSERT INTO `" . $config['prefix'] . "nextactions` (`parentId`,`nextaction`) VALUES ('{$values['parentId']}','{$values['newitemId']}') ON DUPLICATE KEY UPDATE `" . $config['prefix'] . "nextaction`='{$values['newitemId']}'",
        "countitems"                => "SELECT `" . $config['prefix'] . "type`, COUNT(*) AS nitems FROM `" . $config['prefix'] . "itemattributes`, `" . $config['prefix'] . "itemstatus` WHERE `" . $config['prefix'] . "itemattributes`.`itemId`=`itemstatus`.`itemId` ".$values['filterquery']." GROUP BY `" . $config['prefix'] . "type`",
        "countnextactions"          => "SELECT COUNT(`nextaction`) AS nnextactions FROM `" . $config['prefix'] . "nextactions`",
        "countcontextreport_naonly" => "SELECT `" . $config['prefix'] . "itemattributes`.`contextId`, `" . $config['prefix'] . "itemattributes`.`timeframeId`, COUNT(*) AS count FROM `" . $config['prefix'] . "itemattributes`, `" . $config['prefix'] . "itemstatus`, `" . $config['prefix'] . "nextactions` WHERE `" . $config['prefix'] . "itemstatus`.`itemId`=`itemattributes`.`itemId` AND  `" . $config['prefix'] . "nextactions`.`nextaction` = `" . $config['prefix'] . "itemstatus`.`itemId`AND `" . $config['prefix'] . "itemattributes`.`isSomeday`='n' AND (`itemstatus`.`dateCompleted` IS NULL OR `" . $config['prefix'] . "itemstatus`.`dateCompleted`='0000-00-00') GROUP BY `" . $config['prefix'] . "itemattributes`.`contextId`, `" . $config['prefix'] . "itemattributes`.`timeframeId`",
        "countcontextreport_all"    => "SELECT `" . $config['prefix'] . "itemattributes`.`contextId`, `" . $config['prefix'] . "itemattributes`.`timeframeId`, COUNT(*) AS count FROM `" . $config['prefix'] . "itemattributes`, `" . $config['prefix'] . "itemstatus` WHERE `" . $config['prefix'] . "itemstatus`.`itemId`=`itemattributes`.`itemId` AND `" . $config['prefix'] . "itemattributes`.`type`='a' AND `" . $config['prefix'] . "itemattributes`.`isSomeday`='n' AND (`itemstatus`.`dateCompleted` IS NULL OR `" . $config['prefix'] . "itemstatus`.`dateCompleted`='0000-00-00')  GROUP BY `" . $config['prefix'] . "itemattributes`.`contextId`, `" . $config['prefix'] . "itemattributes`.`timeframeId`",
        "countspacecontexts"        => "SELECT COUNT(`name`) AS ncontexts FROM `" . $config['prefix'] . "context`",
        "deletecategory"            => "DELETE FROM `" . $config['prefix'] . "categories` WHERE `" . $config['prefix'] . "categoryId`='{$values['categoryId']}'",
        "deletechecklist"           => "DELETE FROM `" . $config['prefix'] . "checklist` WHERE `" . $config['prefix'] . "checklistId`='{$values['checklistId']}'",
        "deletechecklistitem"       => "DELETE FROM `" . $config['prefix'] . "checklistItems` WHERE `" . $config['prefix'] . "checklistItemId`='{$values['checklistItemId']}'",
        "deleteitem"                => "DELETE FROM `" . $config['prefix'] . "items` WHERE `" . $config['prefix'] . "itemId`='{$values['itemId']}'",
        "deleteitemattributes"      => "DELETE FROM `" . $config['prefix'] . "itemattributes` WHERE `" . $config['prefix'] . "itemId`='{$values['itemId']}'",
        "deleteitemstatus"          => "DELETE FROM `" . $config['prefix'] . "itemstatus` WHERE `" . $config['prefix'] . "itemId`='{$values['itemId']}'",
        "deletelist"                => "DELETE FROM `" . $config['prefix'] . "list` WHERE `" . $config['prefix'] . "listId`='{$values['listId']}'",
        "deletelistitem"            => "DELETE FROM `" . $config['prefix'] . "listItems` WHERE `" . $config['prefix'] . "listItemId`='{$values['listItemId']}'",
        "deletelookup"              => "DELETE FROM `" . $config['prefix'] . "lookup` WHERE `" . $config['prefix'] . "itemId` ='{$values['itemId']}'",
        "deletenextaction"          => "DELETE FROM `" . $config['prefix'] . "nextactions` WHERE `" . $config['prefix'] . "nextAction`='{$values['itemId']}'",
        "deletenote"                => "DELETE FROM `" . $config['prefix'] . "tickler` WHERE `" . $config['prefix'] . "ticklerId`='{$values['noteId']}'",
        "deletespacecontext"        => "DELETE FROM `" . $config['prefix'] . "context` WHERE `" . $config['prefix'] . "contextId`='{$values['contextId']}'",
        "deletetimecontext"         => "DELETE FROM `" . $config['prefix'] . "timeitems` WHERE `" . $config['prefix'] . "timeframeId`='{$values['tcId']}'",
        "getchecklistitems"         => "SELECT `" . $config['prefix'] . "checklistItems`.`checklistitemId`, `" . $config['prefix'] . "checklistItems`.`item`, `" . $config['prefix'] . "checklistItems`.`notes`, `" . $config['prefix'] . "checklistItems`.`checklistId`, `" . $config['prefix'] . "checklistItems`.`checked` FROM `" . $config['prefix'] . "checklistItems` LEFT JOIN `" . $config['prefix'] . "checklist` on `" . $config['prefix'] . "checklistItems`.`checklistId` = `" . $config['prefix'] . "checklist`.`checklistId` WHERE `" . $config['prefix'] . "checklist`.`checklistId` = '{$values['checklistId']}' ORDER BY {$sort['getchecklistitems']}",
        "getchecklists"		    => "SELECT `" . $config['prefix'] . "checklist`.`checklistId`, `" . $config['prefix'] . "checklist`.`title`, `" . $config['prefix'] . "checklist`.`description`, `" . $config['prefix'] . "checklist`.`categoryId`, `" . $config['prefix'] . "categories`.`category` FROM `" . $config['prefix'] . "checklist`, `" . $config['prefix'] . "categories` WHERE `" . $config['prefix'] . "checklist`.`categoryId`=`categories`.`categoryId` ".$values['filterquery']." ORDER BY {$sort['getchecklists']}",
        "getchildren"               => "SELECT `" . $config['prefix'] . "items`.`itemId`, `" . $config['prefix'] . "items`.`title`, `" . $config['prefix'] . "items`.`description`, `" . $config['prefix'] . "items`.`desiredOutcome`, `" . $config['prefix'] . "itemattributes`.`type`, `" . $config['prefix'] . "itemattributes`.`isSomeday`, `" . $config['prefix'] . "itemattributes`.`deadline`, `" . $config['prefix'] . "itemattributes`.`repeat`, `" . $config['prefix'] . "itemattributes`.`suppress`, `" . $config['prefix'] . "itemattributes`.`suppressUntil`, `" . $config['prefix'] . "itemstatus`.`dateCreated`, `" . $config['prefix'] . "itemstatus`.`dateCompleted`, `" . $config['prefix'] . "itemstatus`.`lastmodified`, `" . $config['prefix'] . "itemattributes`.`categoryId`, `" . $config['prefix'] . "categories`.`category`, `" . $config['prefix'] . "itemattributes`.`contextId`, `" . $config['prefix'] . "context`.`name` AS cname, `" . $config['prefix'] . "itemattributes`.`timeframeId`, `" . $config['prefix'] . "timeitems`.`timeframe` FROM (`itemattributes`, `" . $config['prefix'] . "lookup`) JOIN `" . $config['prefix'] . "items` ON (`itemattributes`.`itemId` = `" . $config['prefix'] . "items`.`itemId`) JOIN `" . $config['prefix'] . "itemstatus` ON (`itemattributes`.`itemId` = `" . $config['prefix'] . "itemstatus`.`itemId`) LEFT OUTER JOIN `" . $config['prefix'] . "context` ON (`itemattributes`.`contextId` = `" . $config['prefix'] . "context`.`contextId`) LEFT OUTER JOIN `" . $config['prefix'] . "categories` ON (`itemattributes`.`categoryId` = `" . $config['prefix'] . "categories`.`categoryId`) LEFT OUTER JOIN `" . $config['prefix'] . "timeitems` ON (`itemattributes`.`timeframeId` = `" . $config['prefix'] . "timeitems`.`timeframeId`) WHERE `" . $config['prefix'] . "lookup`.`itemId`= `" . $config['prefix'] . "itemattributes`.`itemId` and `" . $config['prefix'] . "lookup`.`parentId`= '{$values['parentId']}' ".$values['filterquery']." ORDER BY {$sort['getchildren']}",
        "getitems"                  => "SELECT `" . $config['prefix'] . "items`.`itemId`, `" . $config['prefix'] . "items`.`title`, `" . $config['prefix'] . "items`.`description` FROM `" . $config['prefix'] . "itemattributes` JOIN `" . $config['prefix'] . "items` ON (`itemattributes`.`itemId` = `" . $config['prefix'] . "items`.`itemId`) JOIN `" . $config['prefix'] . "itemstatus` ON (`itemattributes`.`itemId` = `" . $config['prefix'] . "itemstatus`.`itemId`) LEFT OUTER JOIN `" . $config['prefix'] . "context` ON (`itemattributes`.`contextId` = `" . $config['prefix'] . "context`.`contextId`) LEFT OUTER JOIN `" . $config['prefix'] . "categories` ON (`itemattributes`.`categoryId` = `" . $config['prefix'] . "categories`.`categoryId`) LEFT OUTER JOIN `" . $config['prefix'] . "timeitems` ON (`itemattributes`.`timeframeId` = `" . $config['prefix'] . "timeitems`.`timeframeId`) ".$values['filterquery']." ORDER BY {$sort['getitems']}",
        "getitemsandparent"         => "SELECT x.`itemId`, x.`title`, x.`description`, x.`desiredOutcome`, x.`type`, x.`isSomeday`, x.`deadline`, x.`repeat`, x.`suppress`, x.`suppressUntil`, x.`dateCreated`, x.`dateCompleted`, x.`lastmodified`, x.`categoryId`, x.`category`, x.`contextId`, x.`cname`, x.`timeframeId`, x.`timeframe`, y.`parentId`, y.`ptitle`, y.`pdescription`, y.`pdesiredOutcome`, y.`ptype`, y.`pisSomeday`, y.`pdeadline`, y.`prepeat`, y.`psuppress`, y.`psuppressUntil`, y.`pdateCreated`, y.`pdateCompleted`, y.`plastmodified`, y.`pcategoryId`, y.`pcatname`, y.`pcontextId`, y.`pcname`, y.`ptimeframeId`, y.`ptimeframe` FROM (SELECT `" . $config['prefix'] . "items`.`itemId`, `" . $config['prefix'] . "items`.`title`, `" . $config['prefix'] . "items`.`description`, `" . $config['prefix'] . "items`.`desiredOutcome`, `" . $config['prefix'] . "itemattributes`.`type`, `" . $config['prefix'] . "itemattributes`.`isSomeday`, `" . $config['prefix'] . "itemattributes`.`deadline`, `" . $config['prefix'] . "itemattributes`.`repeat`, `" . $config['prefix'] . "itemattributes`.`suppress`, `" . $config['prefix'] . "itemattributes`.`suppressUntil`,  `" . $config['prefix'] . "itemstatus`.`dateCreated`, `" . $config['prefix'] . "itemstatus`.`dateCompleted`, `" . $config['prefix'] . "itemstatus`.`lastmodified`, `" . $config['prefix'] . "itemattributes`.`categoryId`, `" . $config['prefix'] . "categories`.`category`, `" . $config['prefix'] . "itemattributes`.`contextId`, `" . $config['prefix'] . "context`.`name` AS cname, `" . $config['prefix'] . "itemattributes`.`timeframeId`, `" . $config['prefix'] . "timeitems`.`timeframe`, `" . $config['prefix'] . "lookup`.`parentId` FROM `" . $config['prefix'] . "itemattributes` JOIN `" . $config['prefix'] . "items` ON (`itemattributes`.`itemId` = `" . $config['prefix'] . "items`.`itemId`) JOIN `" . $config['prefix'] . "itemstatus` ON (`itemattributes`.`itemId` = `" . $config['prefix'] . "itemstatus`.`itemId`) LEFT OUTER JOIN `" . $config['prefix'] . "context` ON (`itemattributes`.`contextId` = `" . $config['prefix'] . "context`.`contextId`) LEFT OUTER JOIN `" . $config['prefix'] . "categories` ON (`itemattributes`.`categoryId` = `" . $config['prefix'] . "categories`.`categoryId`) LEFT OUTER JOIN `" . $config['prefix'] . "timeitems` ON (`itemattributes`.`timeframeId` = `" . $config['prefix'] . "timeitems`.`timeframeId`) LEFT OUTER JOIN `" . $config['prefix'] . "lookup` ON (`itemattributes`.`itemId` = `" . $config['prefix'] . "lookup`.`itemId`)".$values['childfilterquery'].") x LEFT OUTER JOIN (SELECT `" . $config['prefix'] . "items`.`itemId` AS parentId, `" . $config['prefix'] . "items`.`title` AS ptitle, `" . $config['prefix'] . "items`.`description` AS pdescription, `" . $config['prefix'] . "items`.`desiredOutcome` AS pdesiredOutcome, `" . $config['prefix'] . "itemattributes`.`type` AS ptype, `" . $config['prefix'] . "itemattributes`.`isSomeday` AS pisSomeday, `" . $config['prefix'] . "itemattributes`.`deadline` AS pdeadline, `" . $config['prefix'] . "itemattributes`.`repeat` AS prepeat, `" . $config['prefix'] . "itemattributes`.`suppress` AS psuppress, `" . $config['prefix'] . "itemattributes`.`suppressUntil` AS psuppressUntil,  `" . $config['prefix'] . "itemstatus`.`dateCreated` AS pdateCreated, `" . $config['prefix'] . "itemstatus`.`dateCompleted` AS pdateCompleted, `" . $config['prefix'] . "itemstatus`.`lastmodified` AS plastmodified, `" . $config['prefix'] . "itemattributes`.`categoryId` AS pcategoryId, `" . $config['prefix'] . "categories`.`category` as pcatname, `" . $config['prefix'] . "itemattributes`.`contextId` AS pcontextId, `" . $config['prefix'] . "context`.`name` AS pcname, `" . $config['prefix'] . "itemattributes`.`timeframeId` AS ptimeframeId, `" . $config['prefix'] . "timeitems`.`timeframe` AS ptimeframe FROM `" . $config['prefix'] . "itemattributes` JOIN `" . $config['prefix'] . "items` ON (`itemattributes`.`itemId` = `" . $config['prefix'] . "items`.`itemId`) JOIN `" . $config['prefix'] . "itemstatus` ON (`itemattributes`.`itemId` = `" . $config['prefix'] . "itemstatus`.`itemId`) LEFT OUTER JOIN `" . $config['prefix'] . "context` ON (`itemattributes`.`contextId` = `" . $config['prefix'] . "context`.`contextId`) LEFT OUTER JOIN `" . $config['prefix'] . "categories` ON (`itemattributes`.`categoryId` = `" . $config['prefix'] . "categories`.`categoryId`) LEFT OUTER JOIN `" . $config['prefix'] . "timeitems` ON (`itemattributes`.`timeframeId` = `" . $config['prefix'] . "timeitems`.`timeframeId`)".$values['parentfilterquery'].") y ON (y.parentId = x.parentId) ".$values['filterquery']." ORDER BY {$sort['getitemsandparent']}",
        "getlistitems"              => "SELECT `" . $config['prefix'] . "listItems`.`listItemId`, `" . $config['prefix'] . "listItems`.`item`, `" . $config['prefix'] . "listItems`.`notes`, `" . $config['prefix'] . "listItems`.`listId` FROM `" . $config['prefix'] . "listItems` LEFT JOIN `" . $config['prefix'] . "list` on `" . $config['prefix'] . "listItems`.`listId` = `" . $config['prefix'] . "list`.`listId` WHERE `" . $config['prefix'] . "list`.`listId` = '{$values['listId']}' ".$values['filterquery']." ORDER BY {$sort['getlistitems']}",
        "getlists"                  => "SELECT `" . $config['prefix'] . "list`.`listId`, `" . $config['prefix'] . "list`.`title`, `" . $config['prefix'] . "list`.`description`, `" . $config['prefix'] . "list`.`categoryId`, `" . $config['prefix'] . "categories`.`category` FROM `" . $config['prefix'] . "list`, `" . $config['prefix'] . "categories` WHERE `" . $config['prefix'] . "list`.`categoryId`=`categories`.`categoryId` ".$values['filterquery']." ORDER BY {$sort['getlists']}",
        "getnotes"                  => "SELECT `" . $config['prefix'] . "ticklerId`, `" . $config['prefix'] . "title`, `" . $config['prefix'] . "note`, `" . $config['prefix'] . "date` FROM `" . $config['prefix'] . "tickler` ".$values['filterquery']." ORDER BY {$sort['getnotes']}",
        "getnextactions"            => "SELECT `" . $config['prefix'] . "parentId`, `" . $config['prefix'] . "nextaction` FROM `" . $config['prefix'] . "nextactions`",
	"getorphaneditems"	    => "SELECT `" . $config['prefix'] . "itemattributes`.`itemId`, `" . $config['prefix'] . "itemattributes`.`type`, `" . $config['prefix'] . "items`.`title`, `" . $config['prefix'] . "items`.`description` FROM `" . $config['prefix'] . "itemattributes`, `" . $config['prefix'] . "items`,`itemstatus` WHERE `" . $config['prefix'] . "items`.`itemId`=`itemattributes`.`itemId` AND `" . $config['prefix'] . "itemstatus`.`itemId`=`itemattributes`.`itemId` AND (`itemstatus`.`dateCompleted` IS NULL OR `" . $config['prefix'] . "itemstatus`.`dateCompleted`='0000-00-00') AND `" . $config['prefix'] . "itemattributes`.`type`!='m' AND `" . $config['prefix'] . "itemattributes`.`type`!='i' AND (`itemattributes`.`itemId` NOT IN (SELECT `" . $config['prefix'] . "lookup`.`itemId` FROM `" . $config['prefix'] . "lookup`)) ORDER BY {$sort['getorphaneditems']}",
        "getspacecontexts"          => "SELECT `" . $config['prefix'] . "contextId`, `" . $config['prefix'] . "name` FROM `" . $config['prefix'] . "context`",
        "gettimecontexts"           => "SELECT `" . $config['prefix'] . "timeframeId`, `" . $config['prefix'] . "timeframe`, `" . $config['prefix'] . "description` FROM `" . $config['prefix'] . "timeitems`",
        "listselectbox"             => "SELECT `" . $config['prefix'] . "list`.`listId`, `" . $config['prefix'] . "list`.`title`, `" . $config['prefix'] . "list`.`description`, `" . $config['prefix'] . "list`.`categoryId`, `" . $config['prefix'] . "categories`.`category` FROM `" . $config['prefix'] . "list`, `" . $config['prefix'] . "categories` WHERE `" . $config['prefix'] . "list`.`categoryId`=`categories`.`categoryId` ORDER BY {$sort['listselectbox']}",
        "lookupparent"              => "SELECT `" . $config['prefix'] . "parentId`, `" . $config['prefix'] . "itemId` FROM `" . $config['prefix'] . "lookup` WHERE `" . $config['prefix'] . "itemId`='{$values['itemId']}'",
        "newcategory"               => "INSERT INTO `" . $config['prefix'] . "categories` VALUES (NULL, '{$values['category']}', '{$values['description']}')",
        "newchecklist"              => "INSERT INTO `" . $config['prefix'] . "checklist` VALUES (NULL, '{$values['title']}', '{$values['categoryId']}', '{$values['description']}')",
        "newchecklistitem"          => "INSERT INTO `" . $config['prefix'] . "checklistItems`  VALUES (NULL, '{$values['item']}', '{$values['notes']}', '{$values['checklistId']}', 'n')",
        "newitem"                   => "INSERT INTO `" . $config['prefix'] . "items` (`title`,`description`,`desiredOutcome`) VALUES ('{$values['title']}','{$values['description']}','{$values['desiredOutcome']}')",
        "newitemattributes"         => "INSERT INTO `" . $config['prefix'] . "itemattributes` (`itemId`,`type`,`isSomeday`,`categoryId`,`contextId`,`timeframeId`,`deadline`,`repeat`,`suppress`,`suppressUntil`) VALUES ('{$values['newitemId']}','{$values['type']}','{$values['isSomeday']}',{$values['categoryId']},'{$values['contextId']}','{$values['timeframeId']}',{$values['deadline']},'{$values['repeat']}','{$values['suppress']}','{$values['suppressUntil']}')",
        "newitemstatus"             => "INSERT INTO `" . $config['prefix'] . "itemstatus` (`itemId`,`dateCreated`,`dateCompleted`) VALUES ('{$values['newitemId']}',CURRENT_DATE,{$values['dateCompleted']})",
        "newlist"                   => "INSERT INTO `" . $config['prefix'] . "list` VALUES (NULL, '{$values['title']}', '{$values['categoryId']}', '{$values['description']}')",
        "newlistitem"               => "INSERT INTO `" . $config['prefix'] . "listItems` VALUES (NULL, '{$values['item']}', '{$values['notes']}', '{$values['listId']}', 'n')",
        "newnextaction"             => "INSERT INTO `" . $config['prefix'] . "nextactions` (`parentId`,`nextaction`) VALUES ('{$values['parentId']}','{$values['newitemId']}') ON DUPLICATE KEY UPDATE `" . $config['prefix'] . "nextaction`='{$values['newitemId']}'",
        "newnote"                   => "INSERT INTO `" . $config['prefix'] . "tickler` (`date`,`title`,`note`,`repeat`,`suppressUntil`) VALUES ('{$values['date']}','{$values['title']}','{$values['note']}','{$values['repeat']}','{$values['suppressUntil']}')",
        "newparent"                 => "INSERT INTO `" . $config['prefix'] . "lookup` (`parentId`,`itemId`) VALUES ('{$values['parentId']}','{$values['newitemId']}')",
        "newspacecontext"           => "INSERT INTO `" . $config['prefix'] . "context`  (`name`,`description`) VALUES ('{$values['name']}', '{$values['description']}')",
        "newtimecontext"            => "INSERT INTO `" . $config['prefix'] . "timeitems` (`timeframe`,`description`,`type`) VALUES ('{$values['name']}', '{$values['description']}', '{$values['type']}')",
        "parentselectbox"           => "SELECT `" . $config['prefix'] . "items`.`itemId`, `" . $config['prefix'] . "items`.`title`, `" . $config['prefix'] . "items`.`description`, `" . $config['prefix'] . "itemattributes`.`isSomeday` FROM `" . $config['prefix'] . "items`, `" . $config['prefix'] . "itemattributes`, `" . $config['prefix'] . "itemstatus` WHERE `" . $config['prefix'] . "itemattributes`.`itemId`=`items`.`itemId` AND `" . $config['prefix'] . "itemstatus`.`itemId`=`items`.`itemId` AND `" . $config['prefix'] . "itemattributes`.`type`='{$values['ptype']}' AND (`itemstatus`.`dateCompleted` IS NULL OR `" . $config['prefix'] . "itemstatus`.`dateCompleted` = '0000-00-00') ORDER BY {$sort['parentselectbox']}",
        "reassigncategory"          => "UPDATE `" . $config['prefix'] . "itemattributes` SET `" . $config['prefix'] . "categoryId`='{$values['newCategoryId']}' WHERE `" . $config['prefix'] . "categoryId`='{$values['categoryId']}'",
        "reassignspacecontext"      => "UPDATE `" . $config['prefix'] . "itemattributes` SET `" . $config['prefix'] . "contextId`='{$values['newContextId']}' WHERE `" . $config['prefix'] . "contextId`='{$values['contextId']}'",
        "reassigntimecontext"       => "UPDATE `" . $config['prefix'] . "itemattributes` SET `" . $config['prefix'] . "timeframeId`='{$values['ntcId']}' WHERE `" . $config['prefix'] . "timeframeId`='{$values['tcId']}'",
        "removechecklistitems"      => "DELETE FROM `" . $config['prefix'] . "checklistItems` WHERE `" . $config['prefix'] . "checklistId`='{$values['checklistId']}'",
        "removelistitems"           => "DELETE FROM `" . $config['prefix'] . "listItems` WHERE `" . $config['prefix'] . "listId`='{$values['listId']}'",
        "repeatnote"                => "UPDATE `" . $config['prefix'] . "tickler` SET `" . $config['prefix'] . "date` = DATE_ADD(`date`, INTERVAL ".$values['repeat']." DAY), `" . $config['prefix'] . "note` = '{$values['note']}', `" . $config['prefix'] . "title` = '{$values['title']}', `" . $config['prefix'] . "repeat` = '{$values['repeat']}', `" . $config['prefix'] . "suppressUntil` = '{$values['suppressUntil']}' WHERE `" . $config['prefix'] . "ticklerId` = '{$values['noteId']}'",
        "selectcategory"            => "SELECT `" . $config['prefix'] . "categoryId`, `" . $config['prefix'] . "category`, `" . $config['prefix'] . "description` FROM `" . $config['prefix'] . "categories` WHERE `" . $config['prefix'] . "categoryId` = '{$values['categoryId']}'",
        "selectchecklist"           => "SELECT `" . $config['prefix'] . "checklist`.`checklistId`, `" . $config['prefix'] . "checklist`.`title`, `" . $config['prefix'] . "checklist`.`description`, `" . $config['prefix'] . "checklist`.`categoryId`, `" . $config['prefix'] . "categories`.`category` FROM `" . $config['prefix'] . "checklist`, `" . $config['prefix'] . "categories` WHERE `" . $config['prefix'] . "checklist`.`categoryId`=`categories`.`categoryId` AND `" . $config['prefix'] . "checklistId`='{$values['checklistId']}' ".$values['filterquery']." ORDER BY {$sort['selectchecklist']}",
        "selectchecklistitem"       => "SELECT `" . $config['prefix'] . "checklistItems`.`checklistItemId`, `" . $config['prefix'] . "checklistItems`.`item`, `" . $config['prefix'] . "checklistItems`.`notes`, `" . $config['prefix'] . "checklistItems`.`checklistId`, `" . $config['prefix'] . "checklistItems`.`checked` FROM `" . $config['prefix'] . "checklistItems` WHERE `" . $config['prefix'] . "checklistItemId` = '{$values['checklistItemId']}'",
        "selectcontext"             => "SELECT `" . $config['prefix'] . "context`.`contextId`, `" . $config['prefix'] . "context`.`name`, `" . $config['prefix'] . "context`.`description` FROM `" . $config['prefix'] . "context` WHERE `" . $config['prefix'] . "context`.`contextId` = '{$values['contextId']}'",
        "selectitem"                => "SELECT `" . $config['prefix'] . "items`.`itemId`, `" . $config['prefix'] . "itemattributes`.`type`, `" . $config['prefix'] . "items`.`title`, `" . $config['prefix'] . "items`.`description`, `" . $config['prefix'] . "items`.`desiredOutcome`, `" . $config['prefix'] . "itemattributes`.`categoryId`, `" . $config['prefix'] . "itemattributes`.`contextId`, `" . $config['prefix'] . "itemattributes`.`timeframeId`, `" . $config['prefix'] . "itemattributes`.`isSomeday`, `" . $config['prefix'] . "itemattributes`.`deadline`, `" . $config['prefix'] . "itemattributes`.`repeat`, `" . $config['prefix'] . "itemattributes`.`suppress`, `" . $config['prefix'] . "itemattributes`.`suppressUntil`, `" . $config['prefix'] . "itemstatus`.`dateCreated`, `" . $config['prefix'] . "itemstatus`.`dateCompleted`, `" . $config['prefix'] . "itemstatus`.`lastModified`, `" . $config['prefix'] . "categories`.`category`,`timeitems`.`timeframe`, `" . $config['prefix'] . "context`.`name` AS `" . $config['prefix'] . "cname`  FROM (`items`, `" . $config['prefix'] . "itemattributes`, `" . $config['prefix'] . "itemstatus`) LEFT OUTER JOIN `" . $config['prefix'] . "categories` ON (`categories`.`categoryId`=`itemattributes`.`categoryId`) LEFT OUTER JOIN `" . $config['prefix'] . "context` ON (`context`.`contextId` = `" . $config['prefix'] . "itemattributes`.`contextId`) LEFT OUTER JOIN `" . $config['prefix'] . "timeitems` ON (`timeitems`.`timeframeId` = `" . $config['prefix'] . "itemattributes`.`timeframeId`) WHERE `" . $config['prefix'] . "itemstatus`.`itemId`=`items`.`itemId` AND `" . $config['prefix'] . "itemattributes`.`itemId`=`items`.`itemId` AND `" . $config['prefix'] . "items`.`itemId` = '{$values['itemId']}'",
        "selectlist"                => "SELECT `" . $config['prefix'] . "list`.`listId`, `" . $config['prefix'] . "list`.`title`, `" . $config['prefix'] . "list`.`description`, `" . $config['prefix'] . "list`.`categoryId` FROM `" . $config['prefix'] . "list` WHERE `" . $config['prefix'] . "list`.`listId` = '{$values['listId']}'",
        "selectlistitem"            => "SELECT `" . $config['prefix'] . "listItems`.`listItemId`, `" . $config['prefix'] . "listItems`.`item`, `" . $config['prefix'] . "listItems`.`notes`, `" . $config['prefix'] . "listItems`.`listId`, `" . $config['prefix'] . "listItems`.`dateCompleted` FROM `" . $config['prefix'] . "listItems` WHERE `" . $config['prefix'] . "listItems`.`listItemId` = {$values['listItemId']}",
        "selectnextaction"          => "SELECT `" . $config['prefix'] . "nextactions`.`parentId`, `" . $config['prefix'] . "nextactions`.`nextaction` FROM `" . $config['prefix'] . "nextactions` WHERE `" . $config['prefix'] . "nextactions`.`parentId` = '{$values['parentId']}'",
        "selectnote"                => "SELECT `" . $config['prefix'] . "tickler`.`ticklerId`, `" . $config['prefix'] . "tickler`.`title`, `" . $config['prefix'] . "tickler`.`note`, `" . $config['prefix'] . "tickler`.`date`, `" . $config['prefix'] . "tickler`.`repeat`, `" . $config['prefix'] . "tickler`.`suppressUntil` FROM `" . $config['prefix'] . "tickler` WHERE `" . $config['prefix'] . "tickler`.`ticklerId` = '{$values['noteId']}'",
        "selecttimecontext"         => "SELECT `" . $config['prefix'] . "timeitems`.`timeframeId`, `" . $config['prefix'] . "timeitems`.`timeframe`, `" . $config['prefix'] . "timeitems`.`description`, `" . $config['prefix'] . "timeitems`.`type` FROM `" . $config['prefix'] . "timeitems` WHERE `" . $config['prefix'] . "timeitems`.`timeframeId` = '{$values['tcId']}'",
        "spacecontextselectbox"     => "SELECT `" . $config['prefix'] . "contextId`, `" . $config['prefix'] . "name`, `" . $config['prefix'] . "description` FROM `" . $config['prefix'] . "context` ORDER BY {$sort['spacecontextselectbox']}",
        "testitemrepeat"            => "SELECT `" . $config['prefix'] . "itemattributes`.`repeat` FROM `" . $config['prefix'] . "itemattributes` WHERE `" . $config['prefix'] . "itemattributes`.`itemId`='{$values['completedNa']}'",
        "testnextaction"            => "SELECT `" . $config['prefix'] . "parentId`, `" . $config['prefix'] . "nextaction` FROM `" . $config['prefix'] . "nextactions` WHERE `" . $config['prefix'] . "nextaction`='{$values['itemId']}'",
        "timecontextselectbox"      => "SELECT `" . $config['prefix'] . "timeframeId`, `" . $config['prefix'] . "timeframe`, `" . $config['prefix'] . "description` FROM `" . $config['prefix'] . "timeitems`".$values['timefilterquery']."ORDER BY {$sort['timecontextselectbox']}",
        "updatecategory"            => "UPDATE `" . $config['prefix'] . "categories` SET `" . $config['prefix'] . "category` ='{$values['category']}', `" . $config['prefix'] . "description` ='{$values['description']}' WHERE `" . $config['prefix'] . "categoryId` ='{$values['categoryId']}'",
        "updatechecklist"           => "UPDATE `" . $config['prefix'] . "checklist` SET `" . $config['prefix'] . "title` = '{$values['newchecklistTitle']}', `" . $config['prefix'] . "description` = '{$values['newdescription']}', `" . $config['prefix'] . "categoryId` = '{$values['newcategoryId']}' WHERE `" . $config['prefix'] . "checklistId` ='{$values['checklistId']}'",
        "updatechecklistitem"       => "UPDATE `" . $config['prefix'] . "checklistItems` SET `" . $config['prefix'] . "notes` = '{$values['newnotes']}', `" . $config['prefix'] . "item` = '{$values['newitem']}', `" . $config['prefix'] . "checklistId` = '{$values['checklistId']}', `" . $config['prefix'] . "checked`='{$values['newchecked']}' WHERE `" . $config['prefix'] . "checklistItemId` ='{$values['checklistItemId']}'",
        "updatespacecontext"        => "UPDATE `" . $config['prefix'] . "context` SET `" . $config['prefix'] . "name` ='{$values['name']}', `" . $config['prefix'] . "description`='{$values['description']}' WHERE `" . $config['prefix'] . "contextId` ='{$values['contextId']}'",
        "updateitem"                => "UPDATE `" . $config['prefix'] . "items` SET `" . $config['prefix'] . "description` = '{$values['description']}', `" . $config['prefix'] . "title` = '{$values['title']}', `" . $config['prefix'] . "desiredOutcome` = '{$values['desiredOutcome']}' WHERE `" . $config['prefix'] . "itemId` = '{$values['itemId']}'",
        "updateitemattributes"      => "UPDATE `" . $config['prefix'] . "itemattributes` SET `" . $config['prefix'] . "type` = '{$values['type']}', `" . $config['prefix'] . "isSomeday`= '{$values['isSomeday']}', `" . $config['prefix'] . "categoryId` = '{$values['categoryId']}', `" . $config['prefix'] . "contextId` = '{$values['contextId']}', `" . $config['prefix'] . "timeframeId` = '{$values['timeframeId']}', `" . $config['prefix'] . "deadline` ={$values['deadline']}, `" . $config['prefix'] . "repeat` = '{$values['repeat']}', `" . $config['prefix'] . "suppress`='{$values['suppress']}', `" . $config['prefix'] . "suppressUntil`='{$values['suppressUntil']}' WHERE `" . $config['prefix'] . "itemId` = '{$values['itemId']}'",
        "updateitemstatus"          => "UPDATE `" . $config['prefix'] . "itemstatus` SET `" . $config['prefix'] . "dateCompleted` = {$values['dateCompleted']} WHERE `" . $config['prefix'] . "itemId` = '{$values['itemId']}'",
        "updatelist"                => "UPDATE `" . $config['prefix'] . "list` SET `" . $config['prefix'] . "title` = '{$values['newlistTitle']}', `" . $config['prefix'] . "description` = '{$values['newdescription']}', `" . $config['prefix'] . "categoryId` = '{$values['newcategoryId']}' WHERE `" . $config['prefix'] . "listId` ='{$values['listId']}'",
        "updatelistitem"            => "UPDATE `" . $config['prefix'] . "listItems` SET `" . $config['prefix'] . "notes` = '{$values['newnotes']}', `" . $config['prefix'] . "item` = '{$values['newitem']}', `" . $config['prefix'] . "listId` = '{$values['listId']}', `" . $config['prefix'] . "dateCompleted`='{$values['newdateCompleted']}' WHERE `" . $config['prefix'] . "listItemId` ='{$values['listItemId']}'",
        "updateparent"              => "INSERT INTO `" . $config['prefix'] . "lookup` (`parentId`,`itemId`) VALUES ('{$values['parentId']}','{$values['itemId']}') ON DUPLICATE KEY UPDATE `" . $config['prefix'] . "parentId`='{$values['parentId']}'",
        "updatenextaction"          => "INSERT INTO `" . $config['prefix'] . "nextactions` (`parentId`,`nextaction`) VALUES ('{$values['parentId']}','{$values['itemId']}') ON DUPLICATE KEY UPDATE `" . $config['prefix'] . "nextaction`='{$values['itemId']}'",
        "updatenote"                => "UPDATE `" . $config['prefix'] . "tickler` SET `" . $config['prefix'] . "date` = '{$values['date']}', `" . $config['prefix'] . "note` = '{$values['note']}', `" . $config['prefix'] . "title` = '{$values['title']}', `" . $config['prefix'] . "repeat` = '{$values['repeat']}', `" . $config['prefix'] . "suppressUntil` = '{$values['suppressUntil']}' WHERE `" . $config['prefix'] . "ticklerId` = '{$values['noteId']}'",
        "updatetimecontext"         => "UPDATE `" . $config['prefix'] . "timeitems` SET `" . $config['prefix'] . "timeframe` ='{$values['name']}', `" . $config['prefix'] . "description`='{$values['description']}', `" . $config['prefix'] . "type`='{$values['type']}' WHERE `" . $config['prefix'] . "timeframeId` ='{$values['tcId']}'",
    );
